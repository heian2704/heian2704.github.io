<!DOCTYPE html>
<html>

<head>
    <title>Car Accessories </title>
    <link rel="stylesheet" href="/css/global.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.7.1.slim.min.js" integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <div class="jumbotron text-center">
            <h1 class="display-4">Welcome to the Car Accessories Store!</h1>
            <p class="lead">Your one-stop shop for all your car accessory needs.</p>
        </div>
    
    <div class="container marketing">
        <h1 style="color: #007bff; text-align:center; margin-bottom: 40px;"> Products Available </h1>
        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
              <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
            </ol>
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="img/car cover.png" class="d-block w-100 img-small" alt="...">
                <div class="carousel-caption d-none d-md-block">
                  <h3>Car Cover</h3>
                  <p>Shield your car from the elements with a high-quality car cover.</p>
                </div>
              </div>
              <div class="carousel-item">
                <img src="img/floor mat.png" class = "d-block w-100 img-small" alt="...">
                <div class="carousel-caption d-none d-md-block">
                  <h3>Floor Mats</h3>
                  <p>Keep your car's interior looking fresh and clean with all-weather floor mats.</p>
                </div>
              </div>
              <div class="carousel-item">
                <img src="img/seat cover.png" class="d-block w-100 img-small" alt="...">
                <div class="carousel-caption d-none d-md-block">
                  <h3>Seat Covers</h3>
                  <p>Upgrade your car's interior and protect your seats with stylish seat covers.</p>
                </div>
              </div>
              <div class="carousel-item">
                <img src="img/phone holder.png" class="d-block w-100 img-small" alt="...">
                <div class="carousel-caption d-none d-md-block">
                  <h3>Phone Holder</h3>
                  <p>Keep your phone safe and within reach while driving with a convenient phone holder.</p>
                </div>
              </div>
            </div>
            <a class="carousel-control-prev" type="button" data-target="#carouselExampleIndicators" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" type="button" data-target="#carouselExampleIndicators" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>
        <br>
        <br>
        </br>
        <!-- Four columns of text below the carousel -->
        <div class="row">
            <div class="col-lg-3">
                <h2>Car Cover</h2>
                <p>Shield your car from the elements with a high-quality car cover. Our covers are made from durable, weather-resistant materials that protect against sun damage, rain, snow, dust, and scratches</p>
            </div><!-- /.col-lg-3 -->   
            <div class="col-lg-3">
                <h2>Floor Mats</h2>
                <p>Keep your car's interior looking fresh and clean with all-weather floor mats. These mats are designed to trap dirt, mud, and moisture, protecting your car's carpets from wear and tear.</p> 
            </div><!-- /.col-lg-3 -->
            <div class="col-lg-3">
                <h2>Seat Cover</h2>
                <p>Upgrade your car's interior and protect your seats with stylish seat covers. Our seat covers are made from high-quality materials that are comfortable, durable, and easy to clean</p>      
            </div><!-- /.col-lg-3 -->
            <div class="col-lg-3">
                <h2>Phone Holder</h2>
                <p>Keep your phone safe and within reach while driving with a convenient phone holder. Our phone holders are designed to mount securely to your car's dashboard or air vent, providing easy access to your phone for hands-free calls, navigation, and music.</p>
            </div><!-- /.col-lg-3 -->
        </div><!-- /.row -->
    </div><!-- /.container -->
    
    
    <h1 style="font-size: 37px;">
        Car Accessories 
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addProductModal">Add Product</button>
        <button type="button" class="btn btn-success" id="buyBtn" enabled>Buy</button>
    </h1>

    <table class="table table-bordered table-hover">    
        <thead>
            <tr>
                <th>Accessory</th>
                <th>Amount</th> 
                <th>Price</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="productList">
        </tbody>
        <tfoot>
            <tr>
                <td colspan="2">Total Price:</td>
                <td id="netprice">0</td>
            </tr>
        </tfoot>
        <tfoot>
            <tr>
                <td colspan="2">Product Price:</td>
                <td id="totalPrice">0</td>
            </tr>
        </tfoot>
        <tfoot>
            <tr>
                <td colspan="2">VAT:</td>
                <td id="vatAmount">0</td>
            </tr>
        </tfoot>
    </table>

    <!-- Add Product Modal -->
    <div class="modal fade" id="addProductModal" tabindex="-1" role="dialog" aria-labelledby="addProductModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addProductModalLabel">Add Product</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form>
                        <label for="accessorySelect">Select an accessory:</label>
                        <select id="accessorySelect" class="form-control">
                            <option value="100">Car Cover</option>
                            <option value="200">Floor Mats</option>
                            <option value="30">Seat Covers</option>
                            <option value="40">Phone Holder</option>
                        </select>
                        <br>
                        <label for="amountInput">Amount:</label>
                        <input type="number" id="amountInput" min="1" value="1" class="form-control">
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="addProductBtn">Add Product</button>
                </div>
            </div>
        </div>
    </div>

    <div style="float: right; margin-top: 3%;">
        <h2>Contact Us</h2>
        <ul class="list-unstyled">
            <li><strong>Phone:</strong> +66 234 567 890</li>
            <li><strong>Email:</strong> support@caraccessories.com</li>
            <li><strong>Address:</strong> 123 Car Street, Auto City, ABAC</li>
    </ul>
    </div>

    <script>
        var quotationData = [];

        $(document).ready(function() {
        $('#addProductBtn').on('click', function() {
            addProduct();
            $('#addProductModal').modal('hide');
        });

        $("#productList").on("click", ".delete-btn", function() {
            deleteProduct($(this).closest("tr"));
        });

        $('#buyBtn').on('click', function() {
            if (quotationData.length > 0) {
                alert(`Purchase successful! You purchased items for a total of $${$("#netprice").text()}`);
                $('#productTable').hide();
                quotationData = [];
                renderTable();
            } else {
                alert('Please add a product first!');
            }
        });
        });

        function addProduct() {
        var accessorySelect = $("#accessorySelect");
        var accessoryOption = accessorySelect.find(":selected");
        var accessoryName = accessoryOption.text();
        var accessoryPrice = accessoryOption.val();
        var amountInput = $("#amountInput");
        var amount = amountInput.val();

        var product = {
            description: accessoryName,
            quantity: parseFloat(amount),
            unitPrice: parseFloat(accessoryPrice)
        };

        quotationData.push(product);
        renderTable();
        }

        function deleteProduct(row) {
        var index = row.data("index");
        quotationData.splice(index, 1);
        renderTable();
        row.remove();
        }

        function renderTable() {
        var subTotal = 0;
        var vatAmount = 0;
        var totalPrice = 0;

        $("#productList").empty();

        quotationData.forEach((product, index) => {
            var amount = product.quantity * product.unitPrice;
            subTotal += amount;
            vatAmount += amount * 0.07;
            totalPrice = subTotal + vatAmount;

            var newRow = $("<tr></tr>");
            newRow.data("index", index);
            var accessoryCell = $("<td></td>").text(product.description);
            var amountCell = $("<td></td>").text(product.quantity);
            var priceCell = $("<td></td>").text(product.unitPrice.toFixed(2));
            var actionCell = $("<td></td>").html("<button class='delete-btn'>Delete</button>");

            accessoryCell.appendTo(newRow);
            amountCell.appendTo(newRow);
            newRow.append(priceCell);
            newRow.append(actionCell);

            $("#productList").append(newRow);
            if (quotationData.length > 0) {
                $('#buyBtn').prop('disabled', false);
            } else {
                $('#buyBtn').prop('disabled', true);
        }
        });

        $("#netprice").text(totalPrice.toFixed(2));
        $("#totalPrice").text(subTotal.toFixed(2));
        $("#vatAmount").text(vatAmount.toFixed(2));
        }

    </script>

</body>

</html>